<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="title" content="Générateur d'attestation COVID-19 en un click ">
    <meta name="keywords" content="covid19, attestation">
    <meta name="robots" content="index, follow">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="language" content="French">
    <title>Attestation de déplacement dérogatoire</title>
    <script type="text/javascript">
        window._mNHandle = window._mNHandle || {};
        window._mNHandle.queue = window._mNHandle.queue || [];
        medianet_versionId = "3121199";
    </script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    <script src="https://contextual.media.net/dmedianet.js?cid=8CUY31688" async="async"></script>
</head>
<body class="container">
    <h1 id="Welcome mb-4"> Générateur d'attestation COVID-19 en un click ! </h1>
    <h2 id="first-visit"> Première visite ? </h2>
    <p>Vous pouvez accèder au formulaire pour générer votre lien personnalisé en cliquant ici :</p>
    <a class="btn btn-info mb-3" href="#link-generator">Générer mon lien</a>
    <h2 id="why"> Service </h2>
    <!--Generate why from readme: https://markdowntohtml.com/ -->
    <p>Ce projet permet de générer une attestation de déplacement en &quot;1-click&quot; pour le confinement saison 2 lance en France le vendredi 30 Octobre 2020.
    En effet la version numérique du gouvernement (<a href="https://media.interieur.gouv.fr/deplacement-covid-19/">https://media.interieur.gouv.fr/deplacement-covid-19/</a>) nécessite</p>
    <ul>
      <li>Plus d&#39;un click pour générer une attestation</li>
      <li>Force a re-renter les informations a chaque utilisation sur certains navigateurs (see <a href="https://gist.github.com/niksumeiko/360164708c3b326bd1c8">autocomplete</a> set to <a href="https://github.com/LAB-MI/attestation-deplacement-derogatoire-q4-2020/blob/a2566e82555c56442dbdc6857c21f0e4c8c5dc39/src/js/form.js#L22">false</a>),</li>
    </ul>
    
    <h2 id="Usage"> Utilisation </h2>  
    <!--Generate usage from readme: https://markdowntohtml.com/ -->
    <p>Concu comme un lien a bookmarker sur un dispositif mobile (telephone, tablette, etc), l&#39;ouverture de ce lien declenchera le telechargement d&#39;une nouvelle attestation enrichie des informations fournies dans le lien.</p>
    <p>Cette exemple de lien (prealablement bookmarke) <a href="https://attestationcovid.site/?address=15%20rue%20d%27Antibes&amp;birthday=20/03/1882&amp;city=Antibes&amp;firstname=Rene&amp;minutesoffset=5&amp;lastname=Coty&amp;placeofbirth=Le%20Havre&amp;zipcode=06600&amp;reason=sport_animaux">https://attestationcovid.site/?address=15 rue d&#39;Antibes&amp;birthday=20/03/1882&amp;city=Antibes&amp;firstname=Rene&amp;minutesoffset=5&amp;lastname=Coty&amp;placeofbirth=Le Havre&amp;zipcode=06600&amp;reason=sport_animaux</a> generera une attestation avec les informations suivantes:</p>
    <ul>
    <li><strong>15 rue d&#39;Antibes</strong> <em>l&#39;addresse de votre habitation</em></li>
    <li><strong>20/03/1882</strong> <em>la date de votre aniversaire</em></li>
    <li><strong>Antibes</strong> <em>la ville d&#39;habitation</em></li>
    <li><strong>Rene</strong> <em>votre prenom</em></li>
    <li><strong>03/11/2020 a 13H18</strong> <em>la date de sortie generee a partir de l&#39;heure actuelle en ajoutant un offset (positif pour une date future ou negatif pour une date passee)</em></li>
    <li><strong>Coty</strong> <em>votre nom</em></li>
    <li><strong>Le Havre</strong> <em>votre lieu de naissance</em></li>
    <li><strong>06600</strong> <em>votre code postal</em></li>
    <li><strong>une case cochee</strong> <em>la raison de votre sortie qui selon les choix gouvernementaux pourront etre: travail, achats, sante, famille, handicap, sport_animaux, convocation, missions, enfants</em></li>
    </ul>
    <p>Appreciez votre sortie, sortez couvert et respectez les gestes barrières !</p>
    <p>En général deux bookmarks suffisent car seule la raison change.</p>
    <p>Je recommende d&#39;utiliser sur Android Firefox qui permet de changer facilement l&#39;URL et d&#39;exporter un lien en application.
    
    <h2 id="output"> Generation output </h2>  
    Ici se trouveront les résultats de la génération 
    <p id="status"></p>
    <p id="userdata"></p>
    <p id="errors"></p>
    <h2 id="comtribution"> Contribution </h2> 
    <p>Code is available on <a href="https://github.com/scoulomb/attestation-covid19-saison2-auto">Github</a> . Pull requests are welcome!</p>

    <br>
  
    <h2 id="link-generator"> Générateur de lien </h2> 
    <div>
        Ce service permet de générer une attestation à partir d'un lien personnalisé, vous pouvez utiliser le formulaire ci-dessous pour générer votre propre lien qui sera réutilisable.
        Lorsque vous irez sur ce lien une nouvelle attestation avec vos coordonnées sera générée avec la date du jour ainsi que l'heure à laquelle vous avez cliqué sur le lien
    </div>

    <form>
        <div class="form-group">
            <label for="lastname">Nom :</label>
            <input class="form-control" required="true" type="text" id="lastname" name="lastname">
        </div>
        <div class="form-group">
            <label for="firstname">Prénom :</label>
            <input class="form-control" required="true" type="text" id="firstname" name="firstname">
        </div>
        <div class="form-group">
            <label for="address">Adresse :</label>
            <input class="form-control" required="true" type="text" id="address" name="address">
        </div>
        <div class="form-group">
            <label for="city">Ville :</label>
            <input class="form-control" required="true" type="text" id="city" name="city">
        </div>
        <div class="form-group">
            <label for="zipcode">Code Postal :</label>
            <input class="form-control" required="true" type="text" id="zipcode" name="zipcode">
        </div>
        <div class="form-group">
            <label for="birthday">Date de naissance (format DD/MM/YYYY):</label>
            <input class="form-control" required="true" type="text" id="birthday" name="birthday" placeholder="DD/MM/YYYY">
        </div>
        <div class="form-group">
            <label for="placeofbirth">Lieu de naissance :</label>
            <input class="form-control" required="true" type="text" id="placeofbirth" name="placeofbirth">
        </div>

        <div class="form-group">
          <label for="reason">Raison de votre sortie :</label>
          <select name="reason" id="reason" class="form-control mb-4">
              <option value="">-- Choisir la raison de votre sortie --</option>
              <option value="travail">Aller au travail</option>
              <option value="achats">Faire les courses</option>
              <option value="sante">Consultations à des examens médicaux</option>
              <option value="famille">Familiale </option>
              <option value="handicap">Personnes en situation de handicap</option>
              <option value="sport_animaux">Déplacement brefs dans la limite de 1 heure, < 1km, Sport </option>
              <option value="convocation">Convocation judiciaire ou administrative</option>
              <option value="missions">Missions d'intérêt général</option>
              <option value="enfants">Récupérer ses enfants à l'école</option>
              <option value="sport_animaux">Rendez-vous Tinder à moins de 1 km</option>
          </select>
        </div>

        <div class="form-group">
            <label for="minutesoffset">Dans combien de minutes souhaitez-vous sortir (la valeur peut être négative) :</label>
            <input class="form-control" required="true" type="text" id="minutesoffset" name="minutesoffset">
        </div>

        <br>
        <input type="submit" class="btn btn-info" id="generate-action" value="Générer mon lien personnalisé"  onclick="generateUrl();return false">
    </form>
    <br>
    <div id="result"></div>
    <br>
  
    <script>
        function generateUrl() {
            let arrayParam = [
                'lastname',
                'firstname',
                'address',
                'city',
                'zipcode',
                'birthday',
                'placeofbirth',
                'minutesoffset',
                'reason'
            ];
            let str = 'https://attestationcovid.site/?';
            arrayParam.forEach(function(item) {
              str = str + generateParam(item);
            });
            displayUrl(str);
        }
    
        function generateParam(paramName) {
            return paramName+'='+document.getElementById(paramName).value+'&';
        }
    
        function displayUrl(url) {
            document.getElementById('result').innerHTML = '';
            let textDiv = document.createElement('div');
            let text = document.createTextNode("Voici le lien qui vous permettra de générer votre attestation à la volée, n'oubliez pas de l'enregistrer dans vos favoris");
            textDiv.appendChild(text);
            document.getElementById('result').appendChild(textDiv);
            let a = document.createElement('a');
            let linkText = document.createTextNode(url);
            a.appendChild(linkText);
            a.href = url;
            document.getElementById('result').appendChild(a);
        }
    </script>    
    
    <div id="618834868">
      <script type="text/javascript">
          try {
              window._mNHandle.queue.push(function (){
                  window._mNDetails.loadTag("618834868", "970x90", "618834868");
              });
          }
          catch (error) {}
      </script>
    </div>
    
    <script src="./js/main.js"></script>
</body>
</html>
